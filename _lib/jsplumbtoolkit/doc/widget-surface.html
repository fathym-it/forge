<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>jsPlumb Toolkit - documentation</title>
        <link href="../../css/main.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="../css/main.css" rel="stylesheet">



        <link rel="stylesheet" href="../css/jsplumbtoolkit-defaults.css">
        <link rel="stylesheet" href="../css/jsplumbtoolkit-demo.css">
        <link rel="stylesheet" href="../css/jsplumb-doc.css">
    </head>

    <body>

        <div class="jtk-header">
    <a class="jtk-logo" href="../index.html"><img src="../img/logo-medium-jsplumb.png"></a>

    <div class="jtk-nav">
        <li><a href="../index.html#demos">DEMOS</a></li>
<li><a href="../doc/home.html">DOCS</a></li>
<li><a href="../apidocs/index.html">APIDOCS</a></li>

    </div>

</div>


        <div class="jtk-page-container padding-top-page " style="display:flex;">
            <div id="docs-nav" tabindex="0">
                <ul>
<li>Introduction

<ul>
<li><a href="home.html">Home</a></li>
<li><a href="basic-concepts.html">Basic Concepts</a></li>
<li><a href="basic-concepts.html#instantiating">Instantiating the Toolkit</a></li>
<li><a href="basic-concepts.html#basicloading">Loading Data</a></li>
<li><a href="basic-concepts.html#rendering">Rendering</a></li>
<li><a href="getting-started.html">Creating an app</a></li>
</ul></li>
<li>Data Model

<ul>
<li><a href="data-model.html">Overview</a></li>
<li><a href="data-model.html#format">Data Format</a></li>
<li><a href="data-model.html#node-edge-port-id">Node, Group, Edge and Port IDs</a></li>
<li><a href="data-model.html#node-edge-port-type">Node, Group, Edge and Port Type</a></li>
<li><a href="data-model.html#datafactories">Data Factories</a></li>
<li><a href="graph.html">Graph Operations</a></li>
</ul></li>
<li>Rendering

<ul>
<li><a href="rendering.html">Overview</a></li>
<li><a href="views.html">Configuring a View</a></li>
<li><a href="templating.html">Templating</a></li>
<li><a href="groups.html">Groups</a></li>
<li><a href="layouts.html">Layouts</a></li>
<li><a href="ui-states.html">UI States</a></li>
<li><a href="path-tracing.html">Path Tracing</a></li>
<li><a href="rendering.html#visibility">Hiding/Showing Elements</a></li>
<li><a href="rendering.html#dragpalette">Drag &amp; Drop Nodes</a></li>
<li><a href="navigation.html">Navigating your Dataset</a></li>
<li><a href="widget-surface.html#zooming">Zooming</a></li>
<li><a href="widget-surface.html">Surface Widget</a></li>
</ul></li>
<li>Data Management

<ul>
<li><a href="loading-and-saving-data.html">Loading &amp; Saving Data</a></li>
<li><a href="updating-data.html">Updating Data</a></li>
</ul></li>
<li>CSS

<ul>
<li><a href="css.html">Overview</a></li>
<li><a href="css.html#defaultcss">Default CSS Stylesheet</a></li>
<li><a href="css.html#ref">Class Reference</a></li>
</ul></li>
<li>Events

<ul>
<li><a href="events.html">Overview</a></li>
<li><a href="events.html#toolkit">Toolkit Events</a></li>
<li><a href="events.html#surface">Rendering Events</a></li>
</ul></li>
<li>Selecting Content

<ul>
<li><a href="selections.html">Selections</a></li>
<li><a href="selections.html#filter">Filtering</a></li>
<li><a href="paths.html">Paths</a></li>
</ul></li>
<li>Library Integrations

<ul>
<li><a href="angular-1.x-integration">Angular 1.x</a></li>
<li><a href="angular-integration.html">Angular 4/Angular 2</a></li>
<li><a href="react-integration.html">React</a> </li>
<li><a href="vue2-integration.html">Vue 2</a> </li>
</ul></li>
<li>Demonstrations<br>

<ul>
<li><a href="demo-hierarchical.html">Hierarchical Layout</a></li>
<li><a href="multiple-hierarchy.html">Hierarchy (multiple roots)</a></li>
<li><a href="demo-spring.html">Spring Layout</a></li>
<li><a href="demo-circular.html">Circular Layout</a></li>
<li><a href="demo-multiple.html">Multiple Renderers</a></li>
<li><a href="demo-paths.html">Path Tracing</a></li>
<li><a href="demo-absolute.html">Absolute Layout</a></li>
<li><a href="demo-database-visualizer.html">Database Visualizer</a></li>
<li><a href="demo-flowchart-builder.html">Flowchart Builder</a></li>
<li><a href="demo-angular-1.x">Angular 1.x Integration</a></li>
<li><a href="demo-angular.html">Angular 4 / Angular 2 Integration (Typescript)</a></li>
<li><a href="demo-react.html">React Integration</a></li>
<li><a href="demo-vue2.html">Vue 2 Integration</a></li>
<li><a href="demo-hello-world.html">Hello World</a></li>
<li><a href="demo-groups.html">Groups</a></li>
<li><a href="demo-angular-1.x-groups">Groups (Angular)</a></li>
<li><a href="demo-angular-groups.html">Groups (Angular 2)</a></li>
<li><a href="demo-active-filtering.html">Active Filtering</a></li>
<li><a href="demo-webpack.html">Webpack Bundling</a></li>
</ul></li>
<li>Miscellaneous

<ul>
<li><a href="dialogs.html">Dialogs</a></li>
<li><a href="drawing.html">Drawing</a></li>
<li><a href="changelog.html">Changelog</a></li>
</ul></li>
</ul>


            </div>
            <div id="docs">                
                <div class="markdown-body">
                    <p><a id="top"></a></p>

<h2>Surface Widget</h2>

<ul>
<li><a href="#panning">Panning</a>

<ul>
<li><a href="#pan-nudge-bars">Nudge Bars</a></li>
<li><a href="#hide-pan-nudge-bars">Hiding the nudge bars</a></li>
</ul></li>
<li><a href="#zooming">Zooming</a></li>
<li><a href="#clamping">Clamping</a></li>
<li><a href="#positioning">Positioning</a></li>
<li><a href="#dragging">Dragging Nodes</a></li>
<li><a href="#selecting">Selecting Nodes</a></li>
<li><a href="#events">Events</a>

<ul>
<li><a href="#eventbind">Listener registration via bind method</a></li>
<li><a href="#eventconstructor">Listener registration via constructor</a></li>
<li><a href="#eventview">Listener registration via View</a></li>
<li><a href="#eventlist">List of Events</a></li>
</ul></li>
<li><a href="#background">Background Images</a>

<ul>
<li><a href="#single-background">Single Images</a></li>
<li><a href="#tiled-background">Tiled Images</a></li>
</ul></li>
<li><a href="#state">Saving/Restoring State</a></li>
<li><a href="#appearance">Appearance</a></li>
<li><a href="#cssclasses">CSS Classes</a></li>
<li><a href="#misc">Miscellaneous</a></li>
</ul>

<p><a name="panning"></a></p>

<h3>Panning</h3>

<p>The Surface widget is an &#39;infinite pan&#39; canvas that does not use scrollbars. To pan the canvas, the user drags using the left mouse button, or, on touch devices, by dragging a single touch.  </p>

<h4>Disabling Panning</h4>

<p>Panning is normally enabled, but a Surface can be initialized with panning disabled by setting <code>enablePan</code> to false:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">enablePan</span><span class="o">:</span><span class="kc">false</span>
<span class="p">});</span>
</code></pre></div>
<p>You can also disable a Surface entirely via the <code>setMode</code> method:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setMode</span><span class="p">(</span><span class="nx">Surface</span><span class="p">.</span><span class="nx">DISABLED</span><span class="p">);</span>
</code></pre></div>
<h4>Filtering Panning</h4>

<p>It&#39;s a fairly common use case that there be some set of elements in your canvas on which a drag should not cause a pan to occur. To handle this, the Surface has the <code>panFilter</code> parameter. This is either a String that is a CSS selector representing elements that <em>should</em> allow a pan to begin, or a Function from which you should return true if you would like a pan to begin.</p>

<h6>CSS Selector Filter</h6>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">panFilter</span><span class="o">:</span><span class="s2">&quot;.someClassName&quot;</span>
<span class="p">});</span>
</code></pre></div>
<h6>Function filter</h6>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">panFilter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">eventTarget</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">someLogic</span><span class="p">(</span><span class="nx">eventTarget</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><a id="pan-nudge-bars"></a></p>

<h4>Pan Nudge Bars</h4>

<p>The Surface draws a &#39;nudge&#39; bar on each edge, which the user can click on to pan the canvas by a small distance in the given direction, or click and hold for continuous panning in that direction.</p>

<p>The default distance moved by a click (or a tick, when held continuously) is 50 pixels. This can be set on the <code>render</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">panDistance</span><span class="o">:</span><span class="mi">25</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><a id="hide-pan-nudge-bars"></a></p>

<h5>Hiding the Pan Buttons</h5>

<p>You can do this via CSS, since each pan button has the class <code>jtk-surface-pan</code>.  You can also do this via a parameter on the <code>render</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">enablePanButtons</span><span class="o">:</span><span class="kc">false</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="zooming"></a></p>

<h3>Zooming</h3>

<p>The default behaviour of the Surface is to support zooming via the mouse wheel, or on touch devices, via pinch to zoom.</p>

<h4>Constructor parameters</h4>

<p>These parameters can be passed in as part of the <code>render</code> call to a Toolkit instance:</p>

<ul>
<li><strong>enableWheelZoom</strong> Defaults to true. Whether or not zooming with the mouse wheel is enabled.</li>
<li><strong>wheelFilter</strong> Optional CSS selector representing elements that should not respond to wheel zoom. Defaults to empty.</li>
<li><strong>wheelZoomMetaKey</strong> Defaults to false. If true, the wheel zoom only fires when Ctrl (or CMD on Mac) is pressed and the wheel is rotated.</li>
</ul>

<h4>Zoom Methods</h4>

<p>There are a few helper methods for zooming exposed on the Surface.</p>

<h5>zoomToFit(options)</h5>

<p>Zooms the display so that all tracked elements fit inside the viewport. This method will also increase 
the zoom if necessary in order that the content fills the 90% of the shortest axis of the viewport.</p>

<p>The most basic call you can make is this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToFit</span><span class="p">();</span>
</code></pre></div>
<p><code>zoomToFit</code> supports a number of parameters: </p>

<ul>
<li><strong>fill</strong>  A decimal indicating how much of the viewport to fill with the zoomed content. Defaults to 0.9.</li>
<li><strong>padding</strong> Padding to leave around all elements. Default is 20 pixels.</li>
<li><strong>onComplete</strong> Optional function to call on operation complete (centering may be animated).</li>
<li><strong>onStep</strong> Optional function to call on operation step (centering may be animated).</li>
<li><strong>doNotAnimate</strong> By default, the centering content step does not use animation (this parameter is set to true). This is due to 
this method being used most often to initially setup a UI.</li>
<li><strong>doNotZoomIfVisible</strong>  Defaults to false. If true, no action is taken if the content is currently all visible.</li>
<li><strong>doNotFirePanEvent</strong> Defaults to false. If true, a pan event will not be fired.</li>
</ul>

<p>An example showing the Surface animating the content until it fits 80% of the viewport and then popping up an alert:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToFit</span><span class="p">({</span>
  <span class="nx">fill</span><span class="o">:</span><span class="mf">0.8</span><span class="p">,</span>
  <span class="nx">doNotAnimate</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="nx">onComplete</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;done!&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h5>zoomToFitIfNecessary(options)</h5>

<p>Works like <code>zoomToFit</code> but if all tracked elements are currently visible does not adjust the zoom.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToFitIfNecessary</span><span class="p">();</span>
</code></pre></div>
<p>All of the parameters supported by <code>zoomToFit</code> are supported by <code>zoomToFitIfNecessary</code>.</p>

<h5>zoomToBackground(options)</h5>

<p>If a background was set, zooms the widget such that the entire background is visible.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToBackground</span><span class="p">({</span>
  <span class="nx">onComplete</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;done!&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>This method also supports <code>onStep</code> and <code>doNotAnimate</code>. </p>

<h5>zoomToSelection(options)</h5>

<p>Zoom to either the current selected set of Nodes in the Toolkit (defaults to the current selection filling 90% of the
shortest axis in the viewport):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToSelection</span><span class="p">();</span>
</code></pre></div>
<p>or provide a Selection of your own to which to zoom:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToSelection</span><span class="p">({</span>
  <span class="nx">fill</span><span class="o">:</span><span class="mf">0.8</span><span class="p">,</span>
  <span class="nx">selection</span><span class="o">:</span><span class="nx">some</span> <span class="nx">Toolkit</span> <span class="nx">Selection</span>
<span class="p">});</span>
</code></pre></div>
<p>To find our more about Selections, see <a href="selections.html">here</a>.</p>

<h5>setZoom(value)</h5>

<p>Sets the current zoom level. This must be a positive decimal number. If it is outside of the current zoom range, it 
will be clamped to the zoom range.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setZoom</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span>
</code></pre></div>
<p>Here we have set the zoom to 50%.</p>

<h5>nudgeZoom(amount)</h5>

<p>Nudges the current zoom level by some value (negative or positive).</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// nudge the zoom by 5% </span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">nudgeZoom</span><span class="p">(</span><span class="mf">0.05</span><span class="p">);</span>

<span class="c1">// nudge the zoom by -15%</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">nudgeZoom</span><span class="p">(</span><span class="o">-</span><span class="mf">0.15</span><span class="p">);</span>
</code></pre></div>
<h5>setZoomRange(range, doNotClamp)</h5>

<p>Sets the current zoom range. By default, this method checks if the current zoom is within the new range, and if it is 
not then <code>setZoom</code> is called, which will cause the zoom to be clamped to an allowed value in the new range. You can 
disable this by passing <code>true</code> for <code>doNotClamp</code>.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setZoomRange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div>
<p>here we have set the zoom range to be 50% minimum, 200% maximum. If the current zoom was outside of this range, it was
 clamped to be within.</p>

<p>Let&#39;s set the zoom to 2, the top of our current range, and then adjust the zoom range without affecting the widget&#39;s
zoom:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setZoom</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">setZoomRange</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="clamping"></a></p>

<h3>Clamping</h3>

<h4>Pan Movement</h4>

<p>By default, the Surface will clamp movement when panning so that some content is always visible. This can be overridden:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">clamp</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<h4>Zoom Movement</h4>

<p>It is also default behaviour to clamp the movement of the canvas when the user zooms such that some content is always visible. Without this, it&#39;s quite easy for a user to accidentally zoom in such a way that all of the content disappears (consider the case that the canvas is zoomed out a long way and the user then zooms in on some whitespace that is a long way from any content).  </p>

<p>As with pan clamping, you can also switch off zoom clamping if you wish: </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">clampZoom</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<h4>Background</h4>

<p>This is discussed <a href="#background">below</a>, but a brief mention should be made of the fact that you can also tell the Surface to clamp movement such that part of the background is always visible:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">clampToBackground</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="positioning"></a></p>

<h3>Positioning</h3>

<p>Several methods are available to assist you with positioning the Surface canvas. These are discussed in greater detail in the API documentation:</p>

<ul>
<li><strong>centerOn(node)</strong> </li>
</ul>

<p>Takes a Node as argument and positions the Surface canvas such that the given Node is at the center in both axes.</p>

<ul>
<li><strong>centerOnHorizontally(node)</strong> </li>
</ul>

<p>Takes a Node as argument and positions the Surface canvas such that the given Node is at the center in the X axis.</p>

<ul>
<li><strong>centerOnVertically(node)</strong> </li>
</ul>

<p>Takes a Node as argument and positions the Surface canvas such that the given Node is at the center in the Y axis.</p>

<ul>
<li><strong>centerContent()</strong> </li>
</ul>

<p>Centers the content in the viewport (without altering the zoom, so the content may still extend past the viewport bounds).</p>

<ul>
<li><strong>pan(x, y)</strong> </li>
</ul>

<p>Pans the canvas by a given amount in X and Y.</p>

<ul>
<li><strong>positionElementAt(el, x, y)</strong> </li>
</ul>

<p>Positions a DOM element at a given X,Y on the canvas, in canvas coordinates (meaning it takes into account the current zoom and pan). This is not intended for use with elements the Surface is managing: it is designed to be used with elements such as pop-ups that you may wish to position relative to the content in your canvas.</p>

<ul>
<li><strong>positionElementAtEventLocation(el, event)</strong> </li>
</ul>

<p>Positions a DOM element at the apparent canvas location corresponding to the page location given by some event. This is not intended for use with elements the Surface is managing: it is designed to be used with elements such as pop-ups that you may wish to position relative to the content in your canvas.</p>

<ul>
<li><strong>positionElementAtPageLocation(el, x, y)</strong> </li>
</ul>

<p>Positions a DOM element at the apparent canvas location corresponding to the given page location. This is not intended for use with elements the Surface is managing: it is designed to be used with elements such as pop-ups that you may wish to position relative to the content in your canvas.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="dragging"></a></p>

<h3>Dragging</h3>

<p>By default, any Nodes rendered by a Surface will be initialized to be draggable.  This can be overridden:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">elementsDraggable</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<h4>Drag Options</h4>

<p>You can provide a set of options that will be applied to every Node when it is made draggable:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">dragOptions</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">grid</span><span class="o">:</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Valid values for the contents of <code>dragOptions</code> are any valid parameters in <a href="https://github.com/jsplumb/katavorio">Katavorio</a>, the drag library used by jsPlumb.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="selecting"></a></p>

<h3>Selecting Nodes</h3>

<p>Nodes managed by a Surface widget may be &quot;selected&quot; at any point in time programmatically via the associated Toolkit 
instance. When a Node is selected, the Surface is informed, and its DOM element is assigned the class 
<code>jtk-surface-selected-element</code>.</p>

<p>You can also select Nodes using the mouse, with a &quot;lasso&quot;. To switch into this mode, call <code>setMode</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setMode</span><span class="p">(</span><span class="nx">Surface</span><span class="p">.</span><span class="nx">SELECT</span><span class="p">);</span>
</code></pre></div>
<h4>Lasso Behaviour</h4>

<p>The lasso works in one of two ways: when the mouse is travelling from left to right, any Node that intersects the 
lasso will be selected. When travelling from right to left, however, only Nodes that are fully enclosed by the lasso 
will be selected.</p>

<h4>Lasso Start Filter</h4>

<p>You may need to specify one or more elements on which a mousedown should not cause the selection lasso to activate. 
You can do that with the <code>lassoFilter</code> parameter:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">lassoFilter</span><span class="o">:</span><span class="s2">&quot;.delete, .add&quot;</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Here we tell the Surface that a mousedown on any element having the class <code>delete</code> or <code>add</code> should not cause the 
lasso to activate - perhaps they are classes assigned to buttons that fire actions in our UI.  The format of 
<code>lassoFilter</code> is any valid CSS selector string.</p>

<h4>Lasso Select Filter</h4>

<p>There is also a finer-grained means of controlling which Nodes should be selected by the lasso - the <code>lassoSelectionFilter</code>
function.  This can be specified in the render call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">lassoSelectionFilter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">foo</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>The function is given Node objects, and is considered to accept the Node if anything other than a boolean <code>false</code> value
is returned. In this example, then, we reject Nodes whose <code>foo</code> value is <code>null</code>.</p>

<p>You can update this function at runtime, in two ways. First, directly via the <code>setLassoSelectionFilter</code> method:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setLassoSelectionFilter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">foo</span> <span class="o">===</span> <span class="s2">&quot;bar&quot;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>...you can also provide a selection filter as an option to the third argument of a <code>setMode</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setMode</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">lassoSelectionFilter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">foo</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h4>Exiting Select Mode</h4>

<p>Ordinarily, the Surface will jump back into Pan mode from Select mode after some Nodes have been selected, but this 
behaviour can be overridden, using the <code>autoExitSelectMode</code> flag:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">autoExitSelectMode</span><span class="o">:</span><span class="kc">false</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="events"></a></p>

<h3>Events</h3>

<p>Event listeners can be bound to the Surface widget in one of three ways:</p>

<ul>
<li>via the <code>bind</code> method</li>
<li>in the <code>events</code> parameter to a <code>render</code> call on an instance of the Toolkit</li>
<li>in the individual Node, Port and Edge definitions in the <code>view</code> parameter to a <code>render</code> call.</li>
</ul>

<p>The full list of bindable events is <a href="#eventlist">below</a>.</p>

<p><a name="eventbind"></a></p>

<h4>Bind</h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;canvasClick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;click on the canvas&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;nodeAdded&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre></div>
<p><a name="suspendevents"></a></p>

<h4>Suspending Events</h4>

<p>You can suspend/enable events from the Surface widget with this method:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setSuspendEvents</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p>You can also wrap the underlying Toolkit&#39;s <code>batch</code> command (which runs a series of operations without making any 
rendering changes) with the Surface widget&#39;s <code>batch</code> command:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">batch</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="s2">&quot;foo&quot;</span><span class="p">});</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="s2">&quot;bar&quot;</span><span class="p">});</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">source</span><span class="o">:</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;bar&quot;</span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>This is equivalent to:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">setSuspendEvents</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">toolkit</span><span class="p">.</span><span class="nx">batch</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="s2">&quot;foo&quot;</span><span class="p">});</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="s2">&quot;bar&quot;</span><span class="p">});</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">({</span><span class="nx">source</span><span class="o">:</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;bar&quot;</span><span class="p">});</span>
<span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">setSuspendEvents</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</code></pre></div>
<p><a name="eventconstructor"></a></p>

<h4>Events Parameter</h4>

<p>You can provide a set of event listeners via the <code>events</code> parameter on a <code>render</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="p">...</span>
  <span class="nx">events</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;canvasClick&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;click on the canvas&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">&quot;nodeAdded&quot;</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Each of these entries is equivalent to first instantiating the Surface and then calling <code>bind</code> on it:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;canvasClick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;click on the canvas&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;nodeAdded&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre></div>
<p><a name="eventview"></a></p>

<h4>View Events</h4>

<p>Each entry in the <code>nodes</code>, <code>groups</code>, <code>ports</code> or <code>edges</code> section of the <code>view</code> you pass to a <code>render</code> call can also 
specify a list of events. The advantage to doing this is that you can be very granular in your event 
registrations, limiting listeners to objects of some specific type as you need to. The disadvantage is of 
course more complexity in configuring everything.</p>

<p>Here&#39;s a simple example showing two node types, one of which declares a <code>dblclick</code> listener:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">view</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">nodes</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">&quot;type_a&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">template</span><span class="o">:</span><span class="s2">&quot;TypeA&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;type_b&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">template</span><span class="o">:</span><span class="s2">&quot;TypeB&quot;</span><span class="p">,</span>
        <span class="nx">events</span><span class="o">:</span><span class="p">{</span>
          <span class="nx">dblclick</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;double click on node &quot;</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h5>View Event Inheritance</h5>

<p>If you have a type declared that extends some other type, it will inherit the parent type&#39;s listeners. But if 
your subtype declares some event listener, that listener will override the parent&#39;s listener for the given event, 
if one is present.  For example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">view</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">nodes</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">&quot;type_a&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">template</span><span class="o">:</span><span class="s2">&quot;TypeA&quot;</span><span class="p">,</span>
        <span class="nx">events</span><span class="o">:</span><span class="p">{</span>
          <span class="nx">dblclick</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;type A double click&quot;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;type_b&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">parent</span><span class="o">:</span><span class="s2">&quot;type_a&quot;</span><span class="p">,</span>
        <span class="nx">events</span><span class="o">:</span><span class="p">{</span>
          <span class="nx">dblclick</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;type B double click&quot;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>A click on a node of type <code>type_b</code> will produce a single line in the console: <code>&quot;type B double click&quot;</code>.</p>

<h5>Subscribable Events in Views</h5>

<p>This is the full list of events to which you can subscribe in a View definition:</p>

<ul>
<li><strong>click</strong> - Notification that a click event occurred</li>
<li><strong>tap</strong> - A synthesized click event that normalises click behaviour between touch and mouse devices</li>
<li><strong>dblclick</strong> - Notification that a double click event occurred</li>
<li><strong>mouseover</strong> - Notification the mouse entered the object</li>
<li><strong>mouseout</strong> - Notification the mouse left the object</li>
<li><strong>mousedown</strong> - Notification a mouse button was pressed on the object</li>
<li><strong>mouseup</strong> - Notification a mouse button was released</li>
<li><strong>contextmenu</strong> - Notification that a context menu event occurred on a node. This typically means a right click.</li>
</ul>

<p>Each of these callback functions is given a JS object, the contents of which differs between Edges and Node/Ports.</p>

<h5>Node Callback Parameters</h5>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">el</span><span class="o">:</span><span class="nx">Element</span><span class="p">,</span> 
  <span class="nx">node</span><span class="o">:</span><span class="nx">Node</span><span class="p">,</span> 
  <span class="nx">e</span><span class="o">:</span><span class="nx">Event</span>
<span class="p">}</span>
</code></pre></div>
<h5>Port Callback Parameters</h5>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">el</span><span class="o">:</span><span class="nx">Element</span><span class="p">,</span> 
  <span class="nx">node</span><span class="o">:</span><span class="nx">Port</span><span class="p">,</span> 
  <span class="nx">e</span><span class="o">:</span><span class="nx">Event</span>
<span class="p">}</span>
</code></pre></div>
<h5>Edge Callback Parameters</h5>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">connection</span><span class="o">:</span><span class="nx">Connection</span><span class="p">,</span> 
  <span class="nx">edge</span><span class="o">:</span><span class="nx">Edge</span><span class="p">,</span> 
  <span class="nx">e</span><span class="o">:</span><span class="nx">Event</span><span class="p">,</span>
  <span class="nx">toolkit</span><span class="o">:</span><span class="nx">jsPlumbToolkitInstance</span><span class="p">,</span>
  <span class="nx">renderer</span><span class="o">:</span><span class="nx">AbstractRenderer</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="eventlist"></a></p>

<h4>List of Events</h4>

<table>
<tr><th><strong>Event</strong></th><th>Description</th><th>Parameters</th></tr>
<tr>
  <td>nodeAdded</td><td>This is a notification that a new node has been added to the UI.</td>
  <td>
    <ul>
      <li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
      <li><strong>data</strong> The underlying Node data.</li>
      <li><strong>el</strong> The DOM element corresponding to the Node.</li>
    </ul>
  </td>
</tr>
<tr>
  <td>nodeRendered</td>
  <td>
This is a notification that a Node has been rendered to the DOM: it is only fired if you create a Surface for an instance of the Toolkit that already contains some data. You can use this event in the same way as you would use `nodeAdded`: to attach behaviour to the Node.
  </td>
  <td>
    <ul>
      <li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
      <li><strong>data</strong> The underlying Node data.</li>
      <li><strong>el</strong> The DOM element corresponding to the Node.</li>
    </ul>
  </td>
</tr>
<tr>
<td>nodeRemoved</td>
<td>This is a notification that a Node has been removed. </td>
<td>
  <ul><li><strong>node</strong>The Node that was removed.</li></ul></td>
</tr>

<tr><td>nodeMoveStart</td>
<td>Notification that a given Node has just begun to be dragged.</td>
<td>
<ul>
  <li><strong>node</strong> The Node that has begun moving.</li>
  <li><strong>domEl</strong> The associated DOM Element.</li>
  <li><strong>el</strong> DOM element, wrapped in a selector for the underlying library.</li>
  <li><strong>elementId</strong> ID of the associated DOM element. This is not necessarily the same as the Node's ID.</li>
  <li><strong>pos</strong> Array of [left,top] denoting the Node's new position (in pixels).</li>
</ul>
</td>
</tr>

<tr><td>nodeMoveEnd</td>
<td>Notification that a given Node has ceased movement.</td>
<td>
<ul>
<li><strong>node</strong> The Node that just finished moving.</li>
<li><strong>domEl</strong> The associated DOM Element.</li>
<li><strong>el</strong> DOM element, wrapped in a selector for the underlying library.</li>
<li><strong>elementId</strong> ID of the associated DOM element. This is not necessarily the same as the Node's ID.</li>
<li><strong>pos</strong> Array of [left,top] denoting the Node's new position (in pixels).</li>
</ul>
</td>
</tr>

<tr><td>edgeAdded</td>
<td>
Notification that a new Edge was established, either programmatically or by the user. Note that this is different from the `nodeRemoved` event described below, which is fired __only__ when the Edge is removed through user intervention in the UI.
</td>
<td><ul>
<li><strong>sourceNodeId</strong> ID of the source Node</li>
<li><strong>sourcePortId</strong> ID of the Port on the source Node. May be null.</li>
<li><strong>targetNodeId</strong> ID of the target Node</li>
<li><strong>targetPortId</strong> ID of the Port on the target Node. May be null.</li>
<li><strong>type</strong> Type of the Edge. Default is `"default"`, but the vast majority of applications will set Edge types.</li>
<li><strong>source</strong> Source object - either a Node or a Port.</li>
<li><strong>target</strong> Target object - either a Node or a Port.</li>
<li><strong>sourceId</strong> Full ID of the source object: if source is a Node then this is just a Node id; otherwise it is in the form NodeId.PortId.</li>
<li><strong>targetId</strong> Full ID of the target object: if target is a Node then this is just a Node id; otherwise it is in the form NodeId.PortId.</li>
<li><strong>edge</strong> Toolkit Edge object</li>
<li><strong>addedByMouse</strong> A Boolean which, if true, indicates the Edge was added through user interaction with the UI, rather than programmatically.</li>

</ul></td></tr>
<tr><td>edgeRemoved</td>
<td>
Notification that an Edge was removed. This event is fired only when the Edge was removed through user interaction with the UI, not when an Edge was removed programmatically.
</td>
<td><ul>
<li><strong>sourceNodeId</strong> ID of the source Node</li>
<li><strong>sourcePortId</strong> ID of the Port on the source Node. May be null.</li>
<li><strong>targetNodeId</strong> ID of the target Node</li>
<li><strong>targetPortId</strong> ID of the Port on the target Node. May be null.</li>
<li><strong>type</strong> Type of the Edge. Default is `"default"`, but the vast majority of applications will set Edge types.</li>
<li><strong>source</strong> Source object - either a Node or a Port.</li>
<li><strong>target</strong> Target object - either a Node or a Port.</li>
<li><strong>sourceId</strong> Full ID of the source object: if source is a Node then this is just a Node id; otherwise it is in the form NodeId.PortId.</li>
<li><strong>targetId</strong> Full ID of the target object: if target is a Node then this is just a Node id; otherwise it is in the form NodeId.PortId.</li>
<li><strong>edge</strong> Toolkit Edge object</li>

</ul></td></tr>
<tr><td>portAdded</td>
<td>
Notification that a new Port has been added to some Node.
</td>
<td>
<ul>
<li><strong>node</strong> Node to which the Port has been added.</li>
<li><strong>port</strong> Port that was added.</li>
<li><strong>nodeEl</strong> DOM element for the Node.</li>
<li><strong>portEl</strong> DOM element for the Port.</li>
</ul>
</td>
</tr>
<tr><td>portRemoved</td>
<td>
Notification that a Port has been removed from some Node.
</td>
<td><ul>
<li><strong>node</strong> Node from which the Port was removed.</li>
<li><strong>port</strong> Port that was removed.</li>
<li><strong>nodeEl</strong> DOM element for the Node.</li>
<li><strong>portEl</strong> DOM element for the Port.</li>

</ul></td></tr>
<tr><td>anchorChanged</td>
<td>
Notification that the anchor position related to some Port has changed. This event is not something that the majority of applications will need to care about.
</td>
<td><ul>

<li><strong>portId</strong> ID of the Port related to the anchor whose position has changed. May be null.</li>
<li><strong>nodeId</strong> ID of the Node related to the anchor whose position has changed.</li>
<li><strong>portType</strong> Type of the related Port. May be null (if portId is null this will of course be null).</li>
<li><strong>node</strong> Node related to the anchor.</li>
<li><strong>port</strong> Port related to the anchor. May be null.</li>
<li><strong>endpoint</strong> Related jsPlumb Endpoint.</li>
<li><strong>anchor</strong> jsPlumb Anchor.</li>

</ul></td></tr>
<tr><td>modeChanged</td>
<td>
Notification that the Surface's mode has changed.
</td>
<td><ul>

<li><strong>newModeId</strong> The id of the new mode. mode may be `"pan"`, `"select"` or `"disabled"`.</li>
              

</ul></td></tr>
<tr><td>objectRepainted</td>
<td>
Notification that some Toolkit object was repainted.
</td>
<td><ul>
<li><strong>obj</strong> Object that was repainted - a Node or a Port.</li>
<li><strong>id</strong> Object's id.</li>
<li><strong>type</strong> Object's type.</li>
<li><strong>el</strong> Related DOM element.</li>

</ul></td></tr>

<tr><td>pan</td>
<td>Notification that the Surface has been panned</td>

<td><ul>
<li><strong>x</strong> New X location of the Surface</li>
<li><strong>y</strong> New Y location of the Surface</li>
<li><strong>z</strong> Current zoom</li>
<li><strong>event</strong> Event that caused the pan</li>

</ul></td></tr>

<tr><td>zoom</td>
<td>Notification that the Surface has been zoomed</td>

<td><ul>
<li><strong>x</strong> New X location of the Surface</li>
<li><strong>y</strong> New Y location of the Surface</li>
<li><strong>z</strong> Current zoom</li>
<li><strong>event</strong> Event that caused the zoom</li>

</ul></td></tr>

<tr><td>canvasClick</td>
<td>
Notification that the canvas background was clicked. 
</td>
<td><ul>
<li><strong>evt</strong> Associated mouse event</li>
</ul></td></tr>

<tr><td>canvasDblClick</td>
<td>
Notification that the canvas background was double-clicked. 
</td>
<td><ul>
<li><strong>evt</strong> Associated mouse event</li>
</ul></td></tr>

<tr><td>relayout</td>
<td>Notification that the layout associated with some Surface performed a full relayout.</td>

<td><ul>

</ul></td></tr>
<tr><td>click</td> 
<td>Click event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>click</td> 
<td>Tap event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>dblclick</td> 
<td>Double click event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>contextmenu</td> 
<td>Context menu event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mousedown</td> 
<td>Mouse down event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mouseup</td> 
<td>Mouse up event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mouseover</td> 
<td>Mouse enter event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mouseout</td> 
<td>Mouse out event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mouseover</td> 
<td>Mouse over event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>

</ul></td></tr>
<tr><td>mousemove</td> 
<td>Mouse move event on a Node or Port.</td>

<td><ul>

<li><strong>node</strong> The Tookit Node object. The Node's id is available via the `id` property.</li>
<li><strong>port</strong> Toolkit Port object, if the event occurred on a Port.</li>
<li><strong>el</strong> The DOM element corresponding to the Node or Port.          </li>      
<li><strong>e</strong> The original mouse event.</li>
</td>
</tr>
</table>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="background"></a></p>

<h3>Background Images</h3>

<p><a id="single-background"></a></p>

<h4>Single Background Image</h4>

<p>To display a single image as the background of the Surface widget:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">toolkit</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">background</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span><span class="s2">&quot;./myBackground.png&quot;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><a id="tiled-background"></a></p>

<h4>Tiled Background Image</h4>

<p>You can use a tiled image as your background - you need to provide a url pattern, the number of available 
zoom levels, the tile size, and the width and height of the full image:</p>

<p>To display a single image as the background of the Surface widget:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">toolkit</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">background</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">&quot;tiled&quot;</span><span class="p">,</span>
    <span class="nx">url</span><span class="o">:</span><span class="s2">&quot;tiles/{z}/tile_{x}_{y}.png&quot;</span><span class="p">,</span>
    <span class="nx">tileSize</span><span class="o">:</span><span class="p">[</span><span class="mi">750</span><span class="p">,</span><span class="mi">750</span><span class="p">],</span>
    <span class="nx">width</span><span class="o">:</span><span class="mi">10000</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span><span class="mi">6000</span><span class="p">,</span>
    <span class="nx">maxZoom</span><span class="o">:</span><span class="mi">3</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h6>Tiled Background Pattern URL</h6>

<p>The URL you supply for a tiled background should have a placeholder for each of <code>zoom</code>, <code>x</code> and <code>y</code>, as in the example above.  Tiles are zero-indexed, so, for example, the top left tile at zoom level 0 would, in the previous example, generate this url:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">tiles</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="nx">tile_0_0</span><span class="p">.</span><span class="nx">png</span>
</code></pre></div>
<p>The Surface does not support the concept of a &quot;continuous world&quot;, in which tiles with negative indices may be requested.</p>

<h4>Clamping to the background image</h4>

<p>Depending on your use case, you may wish to force the Surface to clamp the pan/zoom such that some portion of the background image is always visible. You do this by setting the <code>clampToBackground</code> parameter on a <code>render</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">toolkit</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;someElement&quot;</span><span class="p">,</span>
  <span class="nx">clampToBackground</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="nx">background</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span><span class="s2">&quot;myBackground.png&quot;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h4>Zooming to the background image</h4>

<p>If you wish to zoom out to the point that the entire background image is visible:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">toolkit</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span> <span class="p">...</span> <span class="p">});</span>
<span class="nx">surface</span><span class="p">.</span><span class="nx">zoomToBackground</span><span class="p">();</span>
</code></pre></div>
<p><a href="#top">[top]</a></p>

<hr>

<p><a name="state"></a></p>

<h3>Saving/Restoring State</h3>

<p>The Surface widget supports writing/reading its current state to/from local storage. For some applications this is useful, but keep in mind that this is local to the current browser.</p>

<h4>State handle</h4>

<p>You can provide a state handle to the <code>render</code> call that instantiates a Surface widget:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkitInstance</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
    <span class="p">...</span>
    <span class="nx">stateHandle</span><span class="o">:</span><span class="s2">&quot;myAppSurface&quot;</span>
    <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<h4>Saving State</h4>

<p>To save the current state, call <code>saveState</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">saveState</span><span class="p">();</span>
</code></pre></div>
<p>You can optionally provide a handle to override the one that you provided to the constructor:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">saveState</span><span class="p">(</span><span class="s2">&quot;someSpecialCondition&quot;</span><span class="p">);</span>
</code></pre></div>
<h4>Restoring State</h4>

<p>At the time of writing, <code>restoreState</code> restores only the positions of the elements in the Surface.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">restoreState</span><span class="p">();</span>
</code></pre></div>
<p>As with <code>saveState</code>, you can optionally provide a handle to override the default:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">restoreState</span><span class="p">(</span><span class="s2">&quot;someSpecialCondition&quot;</span><span class="p">);</span>
</code></pre></div>
<h4>Clearing State</h4>

<p>If you wish to clear out the state from local storage for some Surface, you can:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">clearState</span><span class="p">();</span>
</code></pre></div>
<p>again, with an optional <code>handle</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">surface</span><span class="p">.</span><span class="nx">clearState</span><span class="p">(</span><span class="s2">&quot;someSpecialCondition&quot;</span><span class="p">);</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="appearance"></a></p>

<h3>Appearance</h3>

<p>It is recommended that you use the <code>view</code> to configure the appearance of your UI, but should you wish to provide 
some defaults to the underlying jsPlumb instance, you can do so via the <code>jsPlumb</code> parameter:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">jsPlumb</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">Anchor</span><span class="o">:</span><span class="s2">&quot;Center&quot;</span><span class="p">,</span>
    <span class="nx">Connector</span><span class="o">:</span><span class="p">[</span> <span class="s2">&quot;StateMachine&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">curviness</span><span class="o">:</span><span class="mi">50</span> <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Valid values for this object are anything that is a valid <a href="/community/doc/defaults.html">jsPlumb default</a></p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="cssclasses"></a></p>

<p>This is a full list of CSS classes used by the Surface widget.</p>

<h3>CSS</h3>

<table>
<tr><th>Class</th><th>Description</th></tr>
<tr><td>jtk-surface</td><td>Assigned to an element that is acting as a Surface widget.</td></tr>
<tr><td>jtk-surface-canvas</td><td>Assigned to the work area of a Surface widget. This canvas element will have been created automatically by the Surface and is not normally something you will need to style. If you do attach some styles, you should be careful to ensure that this element always has `position:relative;` set. </td></tr>
<tr><td>jtk-surface-lasso</td><td>Assigned to the "lasso" element used when selecting elements in a Surface using the mouse.</td></tr>
<tr><td>jtk-surface-pan</td><td>Assigned to all of the pan buttons in a Surface, regardless of which direction they control.</td></tr>
<tr><td>jtk-surface-pan-top</td><td>Assigned to the pan button that appears on the top edge of the Surface.</td></tr>
<tr><td>jtk-surface-pan-left</td><td>Assigned to the pan button that appears on the topleft edge of the Surface.</td></tr>
<tr><td>jtk-surface-pan-right</td><td>Assigned to the pan button that appears on the right edge of the Surface.</td></tr>
<tr><td>jtk-surface-pan-bottom</td><td>Assigned to the pan button that appears on the bottom edge of the Surface.</td></tr>
<tr><td>jtk-surface-selected-element</td><td>Assigned to any element that is part of some Surface's current selection.</td></tr>
<tr><td>jtk-lasso</td><td>Assigned to the selection lasso element</td></tr>
</table>

<p><a href="#top">TOP</a></p>

<hr>

<p><a name="misc"></a></p>

<h3>Miscellaneous</h3>

<h4>Consuming Right Click</h4>

<p>The default behaviour is to consume any right-click events. This is good when your app is in production, and <em>really annoying</em> when you&#39;re in the middle of development. To suppress this behaviour, set <code>consumeRightClick</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">surface</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="nx">consumeRightClick</span><span class="o">:</span><span class="kc">false</span>
  <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

                </div>
            </div>
        </div>

    </body>

</html>
