<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>jsPlumb Toolkit - documentation</title>
        <link href="../../css/main.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="../css/main.css" rel="stylesheet">



        <link rel="stylesheet" href="../css/jsplumbtoolkit-defaults.css">
        <link rel="stylesheet" href="../css/jsplumbtoolkit-demo.css">
        <link rel="stylesheet" href="../css/jsplumb-doc.css">
    </head>

    <body>

        <div class="jtk-header">
    <a class="jtk-logo" href="../index.html"><img src="../img/logo-medium-jsplumb.png"></a>

    <div class="jtk-nav">
        <li><a href="../index.html#demos">DEMOS</a></li>
<li><a href="../doc/home.html">DOCS</a></li>
<li><a href="../apidocs/index.html">APIDOCS</a></li>

    </div>

</div>


        <div class="jtk-page-container padding-top-page " style="display:flex;">
            <div id="docs-nav" tabindex="0">
                <ul>
<li>Introduction

<ul>
<li><a href="home.html">Home</a></li>
<li><a href="basic-concepts.html">Basic Concepts</a></li>
<li><a href="basic-concepts.html#instantiating">Instantiating the Toolkit</a></li>
<li><a href="basic-concepts.html#basicloading">Loading Data</a></li>
<li><a href="basic-concepts.html#rendering">Rendering</a></li>
<li><a href="getting-started.html">Creating an app</a></li>
</ul></li>
<li>Data Model

<ul>
<li><a href="data-model.html">Overview</a></li>
<li><a href="data-model.html#format">Data Format</a></li>
<li><a href="data-model.html#node-edge-port-id">Node, Group, Edge and Port IDs</a></li>
<li><a href="data-model.html#node-edge-port-type">Node, Group, Edge and Port Type</a></li>
<li><a href="data-model.html#datafactories">Data Factories</a></li>
<li><a href="graph.html">Graph Operations</a></li>
</ul></li>
<li>Rendering

<ul>
<li><a href="rendering.html">Overview</a></li>
<li><a href="views.html">Configuring a View</a></li>
<li><a href="templating.html">Templating</a></li>
<li><a href="groups.html">Groups</a></li>
<li><a href="layouts.html">Layouts</a></li>
<li><a href="ui-states.html">UI States</a></li>
<li><a href="path-tracing.html">Path Tracing</a></li>
<li><a href="rendering.html#visibility">Hiding/Showing Elements</a></li>
<li><a href="rendering.html#dragpalette">Drag &amp; Drop Nodes</a></li>
<li><a href="navigation.html">Navigating your Dataset</a></li>
<li><a href="widget-surface.html#zooming">Zooming</a></li>
<li><a href="widget-surface.html">Surface Widget</a></li>
</ul></li>
<li>Data Management

<ul>
<li><a href="loading-and-saving-data.html">Loading &amp; Saving Data</a></li>
<li><a href="updating-data.html">Updating Data</a></li>
</ul></li>
<li>CSS

<ul>
<li><a href="css.html">Overview</a></li>
<li><a href="css.html#defaultcss">Default CSS Stylesheet</a></li>
<li><a href="css.html#ref">Class Reference</a></li>
</ul></li>
<li>Events

<ul>
<li><a href="events.html">Overview</a></li>
<li><a href="events.html#toolkit">Toolkit Events</a></li>
<li><a href="events.html#surface">Rendering Events</a></li>
</ul></li>
<li>Selecting Content

<ul>
<li><a href="selections.html">Selections</a></li>
<li><a href="selections.html#filter">Filtering</a></li>
<li><a href="paths.html">Paths</a></li>
</ul></li>
<li>Library Integrations

<ul>
<li><a href="angular-1.x-integration">Angular 1.x</a></li>
<li><a href="angular-integration.html">Angular 4/Angular 2</a></li>
<li><a href="react-integration.html">React</a> </li>
<li><a href="vue2-integration.html">Vue 2</a> </li>
</ul></li>
<li>Demonstrations<br>

<ul>
<li><a href="demo-hierarchical.html">Hierarchical Layout</a></li>
<li><a href="multiple-hierarchy.html">Hierarchy (multiple roots)</a></li>
<li><a href="demo-spring.html">Spring Layout</a></li>
<li><a href="demo-circular.html">Circular Layout</a></li>
<li><a href="demo-multiple.html">Multiple Renderers</a></li>
<li><a href="demo-paths.html">Path Tracing</a></li>
<li><a href="demo-absolute.html">Absolute Layout</a></li>
<li><a href="demo-database-visualizer.html">Database Visualizer</a></li>
<li><a href="demo-flowchart-builder.html">Flowchart Builder</a></li>
<li><a href="demo-angular-1.x">Angular 1.x Integration</a></li>
<li><a href="demo-angular.html">Angular 4 / Angular 2 Integration (Typescript)</a></li>
<li><a href="demo-react.html">React Integration</a></li>
<li><a href="demo-vue2.html">Vue 2 Integration</a></li>
<li><a href="demo-hello-world.html">Hello World</a></li>
<li><a href="demo-groups.html">Groups</a></li>
<li><a href="demo-angular-1.x-groups">Groups (Angular)</a></li>
<li><a href="demo-angular-groups.html">Groups (Angular 2)</a></li>
<li><a href="demo-active-filtering.html">Active Filtering</a></li>
<li><a href="demo-webpack.html">Webpack Bundling</a></li>
</ul></li>
<li>Miscellaneous

<ul>
<li><a href="dialogs.html">Dialogs</a></li>
<li><a href="drawing.html">Drawing</a></li>
<li><a href="changelog.html">Changelog</a></li>
</ul></li>
</ul>


            </div>
            <div id="docs">                
                <div class="markdown-body">
                    <p><a id="top"></a></p>

<h2>Hierarchical Layout</h2>

<p>This is an example of how to use the Hierarchical Layout to display a dataset. There are many datasets that can be efficiently represented using this layout.</p>

<p><img src="demo-hierarchical.png" alt="Hierarchical Layout Demo"></p>

<ul>
<li><a href="#package">package.json</a></li>
<li><a href="#setup">Page Setup</a></li>
<li><a href="#templates">Templates</a></li>
<li><a href="#loading">Data Loading</a></li>
<li><a href="#view">View</a></li>
<li><a href="#rendering">Rendering</a></li>
<li><a href="#decoration">Decoration</a></li>
<li><a href="#selecting">Selecting Nodes</a></li>
<li><a href="#adding">Adding New Nodes</a></li>
<li><a href="#deleting">Deleting Nodes</a></li>
</ul>

<p><a id="package"></a></p>

<h3>package.json</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
    <span class="s2">&quot;dependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;font-awesome&quot;</span><span class="o">:</span> <span class="s2">&quot;^4.7.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;jsplumbtoolkit&quot;</span><span class="o">:</span> <span class="s2">&quot;file:../../jsplumbtoolkit.tgz&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a id="setup"></a></p>

<h3>Page Setup</h3>

<h6>CSS</h6>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;node_modules/font-awesome/css/font-awesome.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;node_modules/jsplumbtoolkit/dist/css/jsplumbtoolkit-defaults.css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;node_modules/jsplumbtoolkit/dist/css/jsplumbtoolkit-demo.css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;app.css&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<p>Font Awesome, Bootstrap, <code>jsplumbtoolkit-demo.css</code>, and <code>app.css</code> are used for this demo and are not jsPlumb Toolkit requirements. <code>jsplumbtoolkit-defaults.css</code> is recommended for 
all apps using the Toolkit, at least when you first start to build your app. This stylesheet contains sane defaults for the various widgets in the Toolkit. </p>

<h6>JS</h6>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">&quot;node_modules/jsplumbtoolkit/dist/js/jsplumbtoolkit.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">&quot;demo-support.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">&quot;app.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>We import <code>jsplumbtoolkit.js</code> from <code>node_modules</code> (it was listed in <code>package.json</code>). <code>demo-support.js</code> is used to generate random data sets for the demo. <code>app.js</code> contains the demo code; it is
discussed on this page.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="templates"></a></p>

<h3>Templates</h3>

<p>This demonstration uses a single template to render its nodes:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;jtk&quot;</span> <span class="na">id=</span><span class="s">&quot;jtk-template-default&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;width:${w}px;height:${h}px;&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;delete&quot;</span> <span class="na">title=</span><span class="s">&quot;Click to delete&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-times&quot;</span><span class="nt">&gt;&lt;/i&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;span&gt;</span>${name}<span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;add&quot;</span> <span class="na">title=</span><span class="s">&quot;Add child node&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-plus&quot;</span><span class="nt">&gt;&lt;/i&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>Note here that the id of the template is <code>jtk-template-default</code>. This demo is a simple demo and does not 
assign <em>type</em> to any Nodes; subsequently they are considered to have a type of <code>default</code>.  This template 
id conforms to the rules for <a href="templating.html#inferring-template-ids">inferred template ids</a>, and so the Toolkit 
knows to use this to render the Nodes in the demo.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="init"></a></p>

<h3>Initialization</h3>

<p>We get an instance of the Toolkit and provide a <a href="data-modell.html#constraining-connectivity">beforeStartDetach</a> interceptor.
Our function does not return <code>true</code> and so the user is not able to detach any edges:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">toolkit</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">toolkit</span> <span class="o">=</span> <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">({</span>
  <span class="nx">beforeStartDetach</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Note: we expose <code>toolkit</code> on the window because it&#39;s useful when explaining things to people to be able to reference
some code that is available on the internet. You do not need to do this, of course.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="loading"></a></p>

<h3>Data Loading</h3>

<p>Data for the demonstration is created using the <code>randomHierarchy</code> function from the included <code>demo-support.js</code> file. 
This function creates an arbitrary hierarchy and assigns different widths/heights to the various nodes.</p>

<p>The data is loaded via this call at the bottom of <code>app.js</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">toolkit</span><span class="p">.</span><span class="nx">load</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="nx">jsPlumbToolkitDemoSupport</span><span class="p">.</span><span class="nx">randomHierarchy</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
  <span class="nx">onload</span><span class="o">:</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">zoomToFit</span>
<span class="p">});</span>
</code></pre></div>
<p>The <code>load</code> function takes an optional <code>type</code> parameter that indicates the format of the data you are loading. If 
not supplied - as is the case here - it defaults to <code>&quot;json&quot;</code>, which refers to the Toolkit&#39;s 
<a href="loading-and-saving-data.html#graph-json-syntax">default Graph JSON syntax</a>.</p>

<p>Note also here that we have wired up the <code>zoomToFit</code> function from the Surface to the <code>load</code> method&#39;s <code>onload</code> 
callback.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="view"></a></p>

<h3>View</h3>

<p>This demonstration does not specify anything for the View. It consists of a single Node that has the <code>&quot;default&quot;</code> 
type, and the template used to render the node is named in such a way that the Toolkit finds it automatically 
(as discussed above).</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="rendering"></a></p>

<h3>Rendering</h3>

<p>This is the call that sets up the UI:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">toolkit</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">container</span><span class="o">:</span> <span class="nx">canvasElement</span><span class="p">,</span>
  <span class="nx">consumeRightClick</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">layout</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;Hierarchical&quot;</span><span class="p">,</span>
    <span class="nx">parameters</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">orientation</span><span class="o">:</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
      <span class="nx">padding</span><span class="o">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">decorators</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Hierarchy&quot;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">miniview</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">container</span><span class="o">:</span> <span class="nx">miniviewElement</span><span class="p">,</span>
    <span class="nx">initiallyVisible</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nx">lassoFilter</span><span class="o">:</span> <span class="s2">&quot;.controls, .controls *, .miniview, .miniview *&quot;</span><span class="p">,</span>
  <span class="nx">lassoInvert</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">canvasClick</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">toolkit</span><span class="p">.</span><span class="nx">clearSelection</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">modeChanged</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mode</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">getSelector</span><span class="p">(</span><span class="s2">&quot;[mode]&quot;</span><span class="p">),</span> <span class="s2">&quot;selected-mode&quot;</span><span class="p">);</span>
      <span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">getSelector</span><span class="p">(</span><span class="s2">&quot;[mode=&#39;&quot;</span> <span class="o">+</span> <span class="nx">mode</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">),</span> <span class="s2">&quot;selected-mode&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">elementsDraggable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">jsPlumb</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">Anchors</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Bottom&quot;</span><span class="p">,</span> <span class="s2">&quot;Top&quot;</span><span class="p">],</span>
      <span class="nx">Connector</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;StateMachine&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">curviness</span><span class="o">:</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">],</span>
      <span class="nx">PaintStyle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">lineWidth</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">strokeStyle</span><span class="o">:</span> <span class="s1">&#39;#89bcde&#39;</span> <span class="p">},</span>
      <span class="nx">HoverPaintStyle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">strokeStyle</span><span class="o">:</span> <span class="s2">&quot;#FF6600&quot;</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
      <span class="nx">Endpoints</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">[</span> <span class="s2">&quot;Dot&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">radius</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">],</span>
          <span class="s2">&quot;Blank&quot;</span>
      <span class="p">],</span>
      <span class="nx">EndpointStyle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">fillStyle</span><span class="o">:</span> <span class="s2">&quot;#89bcde&quot;</span> <span class="p">},</span>
      <span class="nx">EndpointHoverStyle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">fillStyle</span><span class="o">:</span> <span class="s2">&quot;#FF6600&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Here&#39;s an explanation of what the various parameters mean:</p>

<ul>
<li><strong>container</strong></li>
</ul>

<p>This identifies the element into which you wish the Toolkit to render.</p>

<ul>
<li><strong>consumeRightClick</strong></li>
</ul>

<p>This is something you&#39;ll find useful when developing: the default behaviour of the Surface widget is to consume right-clicks.</p>

<ul>
<li><strong>layout</strong></li>
</ul>

<p>Parameters for the layout. </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span><span class="s2">&quot;Hierarchical&quot;</span><span class="p">,</span>
  <span class="nx">parameters</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">orientation</span><span class="o">:</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="nx">padding</span><span class="o">:</span><span class="p">[</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">decorators</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Hierarchy&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Here we specify a <code>Hierarchical</code> layout with orientation <code>&quot;horizontal&quot;</code>. <code>&quot;vertical&quot;</code> is the other valid value for 
<code>orientation</code>; <code>&quot;horizontal&quot;</code> is actually the default and therefore not strictly required. We also set padding of 60 
pixels between nodes in each axis, and we nominate a <code>Hierarchy</code> decorator <a href="#decoration">see below</a>.</p>

<ul>
<li><strong>miniview</strong></li>
</ul>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">container</span><span class="o">:</span><span class="nx">miniviewElement</span><span class="p">,</span>
  <span class="nx">initiallyVisible</span><span class="o">:</span><span class="kc">false</span>
<span class="p">}</span>
</code></pre></div>
<p>The miniview options specify the element to convert into a miniview, and <code>initiallyVisible:false</code> 
instructs the miniview to remain hidden until some data has been loaded. You can also provide an element ID as
 the <code>container</code> parameter.</p>

<ul>
<li><strong>lassoFilter</strong></li>
</ul>

<p>This selector specifies elements on which a mousedown should not cause the selection lasso to begin. In this 
demonstration we exclude the buttons in the top left and the miniview.</p>

<ul>
<li><strong>lassoInvert</strong></li>
</ul>

<p>Tells the Toolkit that the lasso should operate in <code>inverted</code> mode, in which unselected parts of the UI are masked.</p>

<ul>
<li><strong>events</strong></li>
</ul>

<p>We listen for two events:</p>

<p><code>canvasClick</code> - a click somewhere on the widget&#39;s whitespace. Then we clear the Toolkit&#39;s current selection.</p>

<p><code>modeChanged</code> - Surface&#39;s mode has changed (either &quot;select&quot; or &quot;pan&quot;). We update the state of the buttons.</p>

<ul>
<li><strong>jsPlumb</strong></li>
</ul>

<p>Recall that the Surface widget is backed by an instance of jsPlumb. This parameter sets the <a href="/community/doc/defaults.html">Defaults</a> for that object.  </p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="decoration"></a></p>

<h3>Decoration</h3>

<p>This demonstration uses the <code>Hierarchy</code> decorator, which is included in the Toolkit from version 1.1.0, and which originated
in <a href="https://blog.jsplumbtoolkit.com/posts/writing-a-layout-decorator.html">this blog post</a> some time back.</p>

<p>Decorators are discussed in detail in the <a href="layouts.html#decorators">layouts documentation</a></p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="selecting"></a></p>

<h3>Selecting Nodes</h3>

<p>Lasso selection is enabled by default on the Surface widget. To activate the lasso, click the pencil icon in the toolbar:</p>

<p><img src="select-lasso.png" alt="Lasso Select Mode"></p>

<p>The code that listens to clicks on this icon is as follows:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// pan mode/select mode</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;.controls&quot;</span><span class="p">,</span> <span class="s2">&quot;tap&quot;</span><span class="p">,</span> <span class="s2">&quot;[mode]&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">renderer</span><span class="p">.</span><span class="nx">setMode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div>
<p>The tap listener extracts the desired mode from the button that was clicked and sets it on the renderer. This causes
a <code>modeChanged</code> event to be fired, which is picked up by the <code>modeChanged</code> event listener in the View.</p>

<p>Note that here we could have used a <code>click</code> listener, but <code>tap</code> works better for mobile devices. </p>

<h5>Lasso Operation</h5>

<p>The lasso works in two ways: when you drag from left to right, any node that intersects your lasso will be selected.  When you drag from right to left, only nodes that are enclosed by your lasso will be selected.</p>

<h5>Exiting Select Mode</h5>

<p>The Surface widget automatically exits select mode once the user has selected something. In this application we also listen to clicks on the whitespace in the widget and switch back to pan mode when we detect one. This is the <code>events</code> argument to the <code>render</code> call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">canvasClick</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toolkit</span><span class="p">.</span><span class="nx">clearSelection</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>clearSelection</code> clears the current selection and switches back to Pan mode.</p>

<p><a href="#top">TOP</a></p>

<hr>

<p><a id="adding"></a></p>

<h3>Adding New Nodes</h3>

<p>Each node in this demonstration has two buttons:</p>

<p><img src="demo-hierarchy-single-node.png" alt="Single Node"></p>

<p>Clicking on the <strong>+</strong> button causes a new node to be added as a child of the current Node. Here&#39;s the code that sets up the listener and adds the child:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">canvasElement</span><span class="p">,</span> <span class="s2">&quot;tap&quot;</span><span class="p">,</span> <span class="s2">&quot;.add&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this helper method can retrieve the associated</span>
  <span class="c1">// toolkit information from any DOM element.</span>
  <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">getObjectInfo</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="c1">// get data for a random node.</span>
  <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">jsPlumbToolkitDemoSupport</span><span class="p">.</span><span class="nx">randomNode</span><span class="p">();</span>
  <span class="c1">// add the node to the toolkit</span>
  <span class="kd">var</span> <span class="nx">newNode</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
  <span class="c1">// and add an edge for it from the current node.</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">addEdge</span><span class="p">({</span><span class="nx">source</span><span class="o">:</span> <span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span> <span class="nx">newNode</span><span class="p">});</span>            
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

<hr>

<p><a name="deleting"></a></p>

<h3>Deleting Nodes</h3>

<p>Clicking the delete button in this demonstration deletes not just the current node, but also all of its descendants.<br>
This is done by creating a <a href="selections.html#descendantSelection">Selection</a> and then instructing the Toolkit to remove 
everything in that Selection:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">canvasElement</span><span class="p">,</span> <span class="s2">&quot;tap&quot;</span><span class="p">,</span> <span class="s2">&quot;.delete &quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">getObjectInfo</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">selection</span> <span class="o">=</span> <span class="nx">toolkit</span><span class="p">.</span><span class="nx">selectDescendants</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nx">toolkit</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">selection</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><a href="#top">TOP</a></p>

                </div>
            </div>
        </div>

    </body>

</html>
